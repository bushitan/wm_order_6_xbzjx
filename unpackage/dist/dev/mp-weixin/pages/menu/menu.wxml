<view><swiper class="screen-swiper square-dot  bg-white" indicator-dots="{{true}}" circular="{{false}}" autoplay="{{true}}" interval="5000" duration="500"><block wx:for="{{swiperList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-height"><image src="{{item}}" mode="aspectFill"></image></swiper-item></block></swiper><view class="VerticalBox"><scroll-view class="VerticalNav nav" style="{{('height:calc(100vh - 375upx - '+SpaceBottom+'px)')}}" scroll-y scroll-with-animation scroll-top="{{verticalNavTop}}"><block wx:for="{{list}}" wx:for-item="category" wx:for-index="index" wx:key="index"><view class="{{['cu-item',index==tabCur?'text-yellow text-bold  bg-white cur flex align-center ':'']}}" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;" data-id="{{index}}" data-event-opts="{{[['tap',[['TabSelect',['$event']]]]]}}" bindtap="__e">{{''+category.category.cate_name+''}}</view></block><view class="pg-space-xxl"></view><view class="pg-space-xxl"></view></scroll-view><scroll-view class="VerticalMain" style="height:calc(100vh - 375rpx - 0px);" scroll-y scroll-with-animation scroll-into-view="{{'main-'+mainCur}}" data-event-opts="{{[['scroll',[['VerticalMain',['$event']]]]]}}" bindscroll="__e"><block wx:for="{{list}}" wx:for-item="category" wx:for-index="index" wx:key="index"><view class="padding-top padding-lr" id="{{'main-'+index}}"><view class="cu-bar  bg-white"><view class="action"><text class="cuIcon-title text-blue"></text>{{category.category.cate_name}}</view></view><view class="cu-list menu "><block wx:for="{{category.products}}" wx:for-item="item" wx:for-index="itemIndex" wx:key="itemIndex"><view data-event-opts="{{[['tap',[['openDetail',[index,itemIndex]]]]]}}" class="cu-item " style="align-items:flex-start;" bindtap="__e"><view><image class="cu-avatar radius lg  bg-gray margin-right-sm " style="width:60px;height:60px;" src="{{item.imgs?item.imgs[0]?item.imgs[0].src:'':''}}" mode="aspectFill"></image></view><view class="action basis-xl padding-bottom"><view><text class=" text-black text-bold text-df">{{item.name}}</text></view><view class="margin-top-xs"><block wx:for="{{item.tags}}" wx:for-item="tag" wx:for-index="tagIndex" wx:key="tagIndex"><text class="bg-gray radius  text-xs margin-right-sm " style="padding:2px 3px;margin-top:20px;">{{tag}}</text></block></view><block wx:if="{{item.shortDescription?true:false}}"><view class="margin-top-xs"><text class="bg-gray radius  text-xs margin-right-sm " style="padding:2px 3px;">{{item.shortDescription}}</text></view></block><view class="margin-top-xs flex justify-between align-center"><view class="text-red text-lg"><text class="text-price"></text>{{item.price+''}}</view><view style="position:relative;"><button class="cu-btn round line-yellow  sm">选规格</button><block wx:if="{{item.num}}"><view class="cu-tag badge">{{item.num}}</view></block></view></view></view></view></block></view></view></block><view class="pg-space-xxl"></view><view class="pg-space-xxl"></view></scroll-view></view><block wx:if="{{$root.g0.length>0}}"><view class="bg-white cu-list menu-avatar" style="{{('position: fixed; bottom:'+SpaceBottom+'px; left: 0; right: 0;')}}"><view class="cu-item"><view data-event-opts="{{[['tap',[['openBill']]]]}}" class="cu-avatar round lg " bindtap="__e"><view style="position:relative;"><image class="cu-avatar  lg round " style="background-color:#ffffff;" src="/static/images/strong/logo.jpg" mode="aspectFill"></image><view class="cu-tag badge">{{totalQuantity}}</view></view></view><view class="content"><view class="text-grey"><view class="text-bold text-xl text-red"><text class="text-price "></text>{{totalPrice+''}}</view></view><view class="text-gray text-sm flex align-center">顺丰专送 | 支持自取</view></view><view><button data-event-opts="{{[['tap',[['toPay']]]]}}" class="cu-btn round bg-yellow text-white shadow margin-right-sm" bindtap="__e">去结算</button></view></view></view></block><block wx:else><view class="bg-white cu-list menu" style="{{('position: fixed; bottom:'+SpaceBottom+'px; left: 0; right: 0;')}}"><view class="cu-item "><view class="action"><text class="line-red text-bold">{{shopDiscount}}</text></view></view></view></block><view class="{{['cu-modal',showChoice?'show':'']}}"><view class="cu-dialog" style="{{(' position: absolute;top:'+CustomBar+'px;bottom:15px;left: 15px;right: 15px;')}}"><view class="cu-bar bg-white justify-end"><view class="content text-bold">{{currentItem.name}}</view><view data-event-opts="{{[['tap',[['closeShow']]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><scroll-view style="{{('width: 100%;height: calc(100vh - 50px - 100px - 30px - '+CustomBar+'px)')}}" scroll-y scroll-with-animation><view><image class="block " style="width:100%;" src="{{currentItem.imgs?currentItem.imgs[0]?currentItem.imgs[0].src:'':''}}" mode="widthFix"></image></view><view class="padding-lr margin-top"><view class="flex flex-start"><block wx:for="{{currentItem.tags}}" wx:for-item="tag" wx:for-index="tagIndex" wx:key="tagIndex"><text class="bg-gray radius  text-xs margin-right-sm padding-xs">{{tag}}</text></block></view><view class="flex flex-start margin-top-sm"><text class="text-gray radius  text-sm  text-left">{{currentItem.shortDescription||""}}</text></view></view><block wx:for="{{currentItem.attributes}}" wx:for-item="att" wx:for-index="attIndex" wx:key="attIndex"><view class="padding-lr margin-top "><view class="flex flex-start margin-top-sm"><text class="text-gray radius  text-sm  text-left">{{att.productAttributeName+''}}</text></view><view class="flex flex-start  flex-wrap margin-top-sm"><block wx:for="{{att.attributeValues}}" wx:for-item="value" wx:for-index="valueIndex" wx:key="valueIndex"><button data-event-opts="{{[['tap',[['clickAtt',[attIndex,valueIndex]]]]]}}" class="{{['cu-btn radius text-sm text-center margin-right-sm margin-bottom-sm',value.isSelect?'bg-yellow text-white':'line-gray']}}" bindtap="__e">{{value.name}}</button></block></view></view></block><view class="pg-space-xxl"></view></scroll-view><view style="position:absolute;bottom:0;left:0;right:0;"><view class="padding-lr padding-tb-sm   solid-bottom" style="background-color:rgba(255,255,255,0.8);" hidden="{{order[key]?order[key].attDes==''?true:false:true}}"><view class="flex flex-start text-sm align-center"><text class="text-gray ">已选规格：</text>{{(order[key]?order[key].attDes:"")+''}}</view></view><view class="padding " style="background-color:rgba(255,255,255,0.8);"><view class="flex justify-between align-center text-xxl"><view class="text-red "><text class="text-price"></text>{{currentItem.price+''}}</view><view class="flex justify-between align-center"><image class="pg-icon" src="/static/images/icon/cut.png" hidden="{{order[key]?false:true}}" data-event-opts="{{[['tap',[['cutItem']]]]}}" bindtap="__e"></image><text class="padding-lr-sm">{{order[key]?order[key].Quantity:0}}</text><image class="pg-icon" src="/static/images/icon/add.png" data-event-opts="{{[['tap',[['addItem']]]]}}" bindtap="__e"></image></view></view><view class="margin-top-sm"><button data-event-opts="{{[['tap',[['confirmDetail']]]]}}" class="cu-btn block round bg-yellow text-white lg" bindtap="__e">确定</button></view></view></view></view></view><view class="{{['cu-modal padding-tb-xl',showOrder?'show':'']}}"><view class="cu-dialog" style="position:relative;"><view class="cu-bar bg-white justify-end"><view class="content text-bold">当前订单</view><view data-event-opts="{{[['tap',[['closeShow']]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-lr padding-tb-sm text-left"><text class="line-red text-bold">{{shopDiscount}}</text></view><view class="cu-list menu bg-white"><block wx:for="{{order}}" wx:for-item="item" wx:for-index="key" wx:key="key"><view class="cu-item margin-tb-sm"><view class="action"><image class="cu-avatar radius lg  bg-gray margin-right-sm " style="width:60px;height:60px;" src="{{item?item.cover:''}}" mode="aspectFill"></image></view><view class="content "><view class="text-black text-left">{{item.name}}</view><view class="text-gray  text-sm text-left">{{item.attDes}}</view><view class="flex justify-between"><view class="text-gray "><text class="text-price"></text><text class="text-red">{{item.total}}</text></view><view class="text-gray  flex justify-between align-center"><image class="pg-icon" src="/static/images/icon/cut.png" data-event-opts="{{[['tap',[['cutOrder',['$0','$1','$2','$3'],[[['order','',key,'categoryIndex']],[['order','',key,'itemIndex']],[['order','',key,'attIndex']],[['order','',key,'valueIndex']]]]]]]}}" bindtap="__e"></image><text class="padding-lr-xs ">{{order[key]?order[key].Quantity:0}}</text><image class="pg-icon" src="/static/images/icon/add.png" data-event-opts="{{[['tap',[['addOrder',['$0','$1','$2','$3'],[[['order','',key,'categoryIndex']],[['order','',key,'itemIndex']],[['order','',key,'attIndex']],[['order','',key,'valueIndex']]]]]]]}}" bindtap="__e"></image></view></view></view></view></block></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['closeShow']]]]}}" class="cu-btn line-yellow round " bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['closeShow']]]]}}" class="cu-btn bg-yellow text-white round margin-left" bindtap="__e">确定</button></view></view></view></view><block wx:if="{{showReLoad}}"><view class="flex justify-center" style="position:fixed;width:750rpx;top:50%;"><button data-event-opts="{{[['tap',[['onInit',['$event']]]]]}}" bindtap="__e">重新加载</button></view></block></view>