{"version":3,"sources":["webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/main.js","webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue?5990","webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue?6660","webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue?c628","webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue?ee33","webpack:///C:/lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue"],"names":["createPage","Page","app","getApp","data","curDate","Date","date","getTime","hour","getHours","minute","getMinutes","currentTime","StatusBar","CustomBar","TabbarBot","storeList","order","preOrder","store","StoreId","StoreName","ShipAddress","pickUpInStore","SHOP_TAKE_WM","db","SHOP_TAKE_ZQ","SHOP_TAKE_TS","ShopTakeList","ShopTakeValue","ShopTakeName","currentAddress","PickTime","PickStartTime","OrderPrePhone","OrderNote","SF","Coupon","totalPrice","totalPack","totalPost","noPowerPay","onLoad","options","onInit","console","log","globalData","isShare","shareGoodID","shareUserSN","methods","getOrder","storeGetList","res","length","Id","Name","SyncStoreId","uni","getStorageSync","KEY_SHOP_ID","i","setData","customerShipAddrs","index","KEY_ORDER_PRE_ADDRESS","getShopTakeType","getCoupon","KEY_ORDER_PRE_PHONE","orderObj","push","storeCurrent","ShopId","$data","value","ShopTakeTypeMode","name","ShopTakeTypeValue","KEY_SHOP_TAKE_TYPE","mathTotalPrice","setUserAddress","selectStore","selectShopTake","itemList","that","showActionSheet","success","tapIndex","addressId","id","showToast","title","icon","jsondata","JSON","stringify","orderCaculatePrice","code","all","order_total","wm_cost","customer_take_ship_fee","toSuccess","e","formId","detail","showModal","setStorageSync","orderGen","sharewxopenid","orderId","redirectTo","url","toAddress","navigateTo","inputOrderPrePhone","inputOrderNote","back","navigateBack","TimeChange"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,yF;AACAA,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAkF;AAC3B;AACL;;;AAGlD;AACsK;AACtK,gBAAgB,sKAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAA27B,CAAgB,w3BAAG,EAAC,C;;;;;;;;;;;;s8BCA/8B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"pages/order/pay.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/order/pay.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./pay.vue?vue&type=template&id=63bdf00d&\"\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\所有软件\\\\HBuilderX.2.4.6.20191210.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('63bdf00d', component.options)\n    } else {\n      api.reload('63bdf00d', component.options)\n    }\n    module.hot.accept(\"./pay.vue?vue&type=template&id=63bdf00d&\", function () {\n      api.rerender('63bdf00d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"lib/git/wm_order/wm_order_6_xbzjx/pages/order/pay.vue\"\nexport default component.exports","export * from \"-!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=template&id=63bdf00d&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../所有软件/HBuilderX.2.4.6.20191210.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar app = getApp()\nexport default {\n\tdata(){\n\t\t\n\t\tvar curDate = new Date();\n\t\tvar date = new Date(curDate.getTime() + 6 * 60 * 1000);\n\t\t\n\t\tvar hour = date.getHours();\n\t\thour = hour < 10? \"0\" + hour : hour;\n\t\tvar minute = date.getMinutes();\n\t\tminute = minute < 10? \"0\" + minute : minute;\n\t\tvar currentTime = hour + ':'+minute\n\t\treturn {\t\t\t\t\n\t\t\tStatusBar:this.StatusBar,\n\t\t\tCustomBar : this.CustomBar,\n\t\t\tTabbarBot:this.TabbarBot,\n\t\t\t\n\t\t\t\n\t\t\tstoreList:[], // 店铺列表\n\t\t\torder:{},\t//当前订单\t\t\t\n\t\t\tpreOrder:{},//预订单\n\t\t\tstore:{},\n\t\t\tStoreId:\"\",\n\t\t\tStoreName:\"\",\n\t\t\tShipAddress:'',\n\t\t\tpickUpInStore:true,\n\t\t\t\n\t\t\t//点单方式\n\t\t\tSHOP_TAKE_WM :this.db.SHOP_TAKE_WM, //1\n\t\t\tSHOP_TAKE_ZQ :this.db.SHOP_TAKE_ZQ, //2\n\t\t\tSHOP_TAKE_TS :this.db.SHOP_TAKE_TS, //4\n\t\t\tShopTakeList:[],\n\t\t\tShopTakeValue:this.db.SHOP_TAKE_WM,\n\t\t\tShopTakeName:'外卖',\n\t\t\t\n\t\t\tcurrentAddress:{}, // 当前地址\n\t\t\t// ReciveName:'',\n\t\t\t// RecivePhone:'',\n\t\t\t// ReciveAddress:'',\n\t\t\t// ReciveCityName:'',\n\t\t\t\n\t\t\tPickTime:currentTime, // 选择时间\n\t\t\tPickStartTime:currentTime,\t\t\t\t\n\t\t\t\n\t\t\tOrderPrePhone:\"\",\n\t\t\tOrderNote:\"\",\n\t\t\t\n\t\t\tSF:{},\n\t\t\tCoupon:[],\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\ttotalPrice:0, // 总价\n\t\t\ttotalPack:0, // 包装费\n\t\t\ttotalPost:0, // 配送费\n\t\t\t\n\t\t\tnoPowerPay:true,\n\t\t}\n\t},\n\tonLoad(options){\n\t\tthis.onInit()\n\t\t\n\t\tconsole.log(\n\t\tapp.globalData.isShare,\n\t\tapp.globalData.shareGoodID,\n\t\tapp.globalData.shareUserSN,\n\t\t)\n\t},\n\t\n\tmethods:{\n\t\t// 初始化\n\t\tasync onInit(){ \n\t\t\tthis.getOrder() // 获取已经选择的订单\n\t\t\t\n\t\t\t// 1 获取配送门店\n\t\t\tvar res = await this.db.storeGetList()\n\t\t\tvar storeList = res.data\t\n\t\t\t\n\t\t\tif(storeList.length == 0 ) // 没有门店\n\t\t\t\treturn\t\t\t\t\n\t\t\t// 获取门店列表\t\t\t\n\t\t\tvar store = storeList[0]\n\t\t\tvar StoreId = storeList[0].Id\n\t\t\tvar StoreName = storeList[0].Name\n\t\t\tvar SyncStoreId = uni.getStorageSync(this.db.KEY_SHOP_ID) || \"\" \t\t\t\t\n\t\t\tfor(var i =0 ; i<storeList.length ; i++){\n\t\t\t\tif(SyncStoreId == storeList[i].Id){\t\t\n\t\t\t\t\tstore = storeList[i]\n\t\t\t\t\tStoreId = storeList[i].Id\n\t\t\t\t\tStoreName = storeList[i].Name \n\t\t\t\t}\n\t\t\t}\t\t\t\t\t\n\t\t\tthis.setData({\n\t\t\t\tstoreList:storeList,\n\t\t\t\tstore:store,\n\t\t\t\tStoreId : StoreId,\n\t\t\t\tStoreName : StoreName,\n\t\t\t})\t\t\t\t\n\t\t\t\n\t\t\t// 3 设置默认的取单地址\n\t\t\tvar res = await this.db.customerShipAddrs()\n\t\t\t\n\t\t\tif(res.data.length > 0){\n\t\t\t\tvar index = uni.getStorageSync( this.db.KEY_ORDER_PRE_ADDRESS) || 0\n\t\t\t\tthis.setData({ currentAddress: res.data[index] })\n\t\t\t}\n\t\t\t\t\n\t\t\t// 4 获取门店点单方式\n\t\t\tthis.getShopTakeType() \n\t\t\t\n\t\t\t// debugger\n\t\t\t// 5 设置默认的顺风预取单\n\t\t\t// this.mathTotalPrice() // 预取顺风费用\n\t\t\t// 6 获取优惠券\n\t\t\tthis.getCoupon() // 获取优惠券\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t// this.getShopList() // 获取门店列表\n\t\t\t// this.getShopTakeType() // 获取门店点单方式\n\t\t\t// this.getTotal() //\t计算总价\n\t\t\t// this.getDefaultAddress() // 获取默认的地址\n\t\t\t\n\t\t\t// 获取本地预留的电话\n\t\t\tthis.setData({\n\t\t\t\tOrderPrePhone:uni.getStorageSync(this.db.KEY_ORDER_PRE_PHONE ) || \"\"\n\t\t\t})\n\t\t\t\n\t\t},\n\t\t\n\t\t// 1 获取已经选择的订单\n\t\tgetOrder(){\t\t\t\n\t\t\t// 获取订单信息\n\t\t\tvar orderObj = uni.getStorageSync(\"order\")\n\t\t\tvar order = [] \t\t\t\t\n\t\t\tfor (var i in orderObj){\n\t\t\t\torder.push( orderObj[i] )\t\n\t\t\t\t// TODO  计算总价\n\t\t\t}\t\t\t\t\n\t\t\tthis.setData({\n\t\t\t\torder:order,\n\t\t\t})\t\t\t\n\t\t},\n\t\t\n\t\t// 获取门店的点单方式\n\t\tasync getShopTakeType(){\n\t\t\t// 获取配送方式\n\t\t\tvar res = await this.db.storeCurrent({\n\t\t\t\tShopId:this.$data.StoreId\n\t\t\t})\n\t\t\tvar value = res.data.ShopTakeTypeMode\n\t\t\tvar ShopTakeList = []\n\t\t\t// debugger\n\t\t\tswitch(value){\n\t\t\t\tcase 1 : ShopTakeList = [{\"name\":\"外卖\",value:1}] ;break;\n\t\t\t\tcase 2 : ShopTakeList = [{\"name\":\"到店自取\",value:2}] ;break;\n\t\t\t\tcase 4 : ShopTakeList = [{\"name\":\"堂食\",value:4}] ;break;\n\t\t\t\tcase 3 : ShopTakeList = [{\"name\":\"外卖\",value:1},{\"name\":\"到店自取\",value:2}] ;break;\n\t\t\t\tcase 5 : ShopTakeList = [{\"name\":\"堂食\",value:4},{\"name\":\"外卖\",value:1}] ;break;\n\t\t\t\tcase 6 : ShopTakeList = [{\"name\":\"堂食\",value:4},{\"name\":\"到店自取\",value:2}] ;break;\n\t\t\t\tcase 7 : ShopTakeList = [{\"name\":\"堂食\",value:4},{\"name\":\"到店自取\",value:2},{\"name\":\"外卖\",value:1}] ;break;\n\t\t\t}\n\t\t\t\n\t\t\t//如果桌面点单方式扫码已经确定\n\t\t\tvar　ShopTakeValue = ShopTakeList[0].value\n\t\t\tvar　ShopTakeName = ShopTakeList[0].name\n\t\t\tvar ShopTakeTypeValue = uni.getStorageSync(this.db.KEY_SHOP_TAKE_TYPE)\n\t\t\t// var ShopTakeTypeValue = this.customerTakeType\n\t\t\t// debugger\n\t\t\tif(ShopTakeTypeValue != \"\"){   \n\t\t\t\tfor(var i =0 ; i<ShopTakeList.length ; i++){\n\t\t\t\t\tif(ShopTakeTypeValue == ShopTakeList[i].value){\n\t\t\t\t\t\tShopTakeValue = ShopTakeList[i].value\n\t\t\t\t\t\tShopTakeName = ShopTakeList[i].name \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\t\t\n\t\t\tconsole.log(ShopTakeValue)\n\t\t\tthis.$data.ShopTakeValue = ShopTakeValue\n\t\t\tthis.setData({\t\n\t\t\t\tShopTakeList:ShopTakeList,\n\t\t\t\tShopTakeValue:ShopTakeValue,\n\t\t\t\tShopTakeName:ShopTakeName,\n\t\t\t})\t\t\t\t\n\t\t\t\t\n\t\t\tthis.mathTotalPrice() // 预取顺风费用\n\t\t},\n\t\t\n\t\t// 3 设置用户地址\n\t\tsetUserAddress(currentAddress){\n\t\t\tconsole.log(currentAddress)\t\t\n\t\t\t\n\t\t\tthis.setData({\n\t\t\t\tcurrentAddress:currentAddress\n\t\t\t})\t\t\t\t\n\t\t\tthis.mathTotalPrice() // 预取配送费\t\t\t\t\n\t\t},\n\t\t\n\t\t// 3 获取优惠券\n\t\tasync getCoupon(){\n\t\t\t//  TODO  获取优惠券列表\n\t\t},\t\n\t\t\t\t\n\t\t/*************选择 门店 | 点单方式 | 优惠券*************/\n\t\t// 选择门店\n\t\tasync selectStore(){\n\t\t\treturn\n\t\t\tvar storeList = this.$data.storeList\n\t\t\tvar itemList = []\n\t\t\tfor (var i=0; i<storeList.length ; i++){\n\t\t\t\titemList.push(storeList[i].Name)\n\t\t\t}\n\t\t\tvar that = this\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList:itemList,\n\t\t\t\tsuccess(res){\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\tStoreId : storeList[res.tapIndex].Id,\n\t\t\t\t\t\tStoreName : storeList[res.tapIndex].Name,\n\t\t\t\t\t})\n\t\t\t\t\tthat.getShopTakeType() // 更新点单方式\n\t\t\t\t\tthat.mathTotalPrice() // 预取配送费\t\t\t\t\t\t\n\t\t\t\t},\n\t\t\t})\n\t\t},\t\t\t\n\t\t// 选择点单方式\n\t\tselectShopTake(){\n\t\t\t// debugger\n\t\t\tvar ShopTakeList = this.$data.ShopTakeList\n\t\t\tvar itemList = []\n\t\t\t\n\t\t\tfor (var i=0; i<ShopTakeList.length ; i++)\n\t\t\t\titemList.push(ShopTakeList[i].name)\n\t\t\tvar that = this\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList:itemList,\n\t\t\t\tsuccess(res){\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\tShopTakeValue : ShopTakeList[res.tapIndex].value,\n\t\t\t\t\t\tShopTakeName : ShopTakeList[res.tapIndex].name,\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tthat.mathTotalPrice() // 到店自取 | 堂食 预下单\t\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 计算费用\n\t\tasync mathTotalPrice(){\n\t\t\tvar addressId =  this.$data.currentAddress.id || \"\"\n\t\t\tif( this.$data.ShopTakeValue == this.$data.SHOP_TAKE_WM &&  addressId == \"\"  ){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:\"请添加收货地址\",\n\t\t\t\t\ticon:\"loading\",\n\t\t\t\t})\n\t\t\t\treturn \n\t\t\t}\n\t\t\t\n\t\t\tvar data =\n\t\t\t{\n\t\t\t\t\"OrderId\": 0,//新建订单 默认为零I\"\t\t\t\t  \n\t\t\t\t\"PaymentMethodSystemName\": \"Payments.WeixinPay\",//支付方式 当前默认微信 硬编码\n\t\t\t\t\"OrderItems\": this.$data.order,\n\t\t\t\t\"OrderNote\":this.$data.OrderNote,//订单描述\t\t\t\t  \n\t\t\t\t\"ShopId\":this.$data.StoreId,\n\t\t\t\t\"CustomerTakeType\":this.$data.ShopTakeValue,\n\t\t\t\t\"WishDateTime\": this.$data.PickTime,\n\t\t\t\t\"ReceiverPhone\":\"123\"\n\t\t\t\t// data[\"ReceiverPhone\"] =\n\t\t\t\t// \"AppId\":\"5099f520489646d28ce9df352237c059\" ,// 门店点Appid，不是小程序ID\n\t\t\t}\n\t\t\tif(this.$data.ShopTakeValue == this.db.SHOP_TAKE_WM){ \n\t\t\t\tdata[\"AddressId\"] = addressId\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar jsondata = JSON.stringify(data)\t\t\n\t\t\tvar res = await this.db.orderCaculatePrice({\n\t\t\t\tjsondata:jsondata\n\t\t\t})\t\t\n\t\t\tconsole.log(res)\n\t\t\tif(res.code == -1){\n\t\t\t\tthis.setData({noPowerPay:true,})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\t\n\t\t\t\n\t\t\tvar preOrder = res.data \n\t\t\tvar all = preOrder.order_total + preOrder.wm_cost + preOrder.customer_take_ship_fee\n\t\t\tthis.setData({\n\t\t\t\t// totalPrice:all, // 总价\n\t\t\t\tpreOrder:preOrder,\n\t\t\t\ttotalPrice:preOrder.order_total , // 总价\n\t\t\t\ttotalPack:preOrder.wm_cost, // 包装费\n\t\t\t\ttotalPost:preOrder.customer_take_ship_fee, // 配送费\n\t\t\t\tnoPowerPay:false,\n\t\t\t})\n\t\t\t\n\t\t},\n\t\t/**\n\t\t * @method 下单\n\t\t */\n\t\tasync toSuccess(e){\t\n\t\t\tconsole.log(e)\n\t\t\tvar formId = e.detail.formId || \"\"\n\t\t\t\t\t\t\t\n\t\t\tvar data =\n\t\t\t{\n\t\t\t\t\"OrderId\": 0,//新建订单 默认为零I\"\n\t\t\t\t// \"ShippingMethod\": this.$data.ShopTakeValue, // 1 外卖　2到店自取 4堂食\t\t\t\t  \n\t\t\t\t\"PaymentMethodSystemName\": \"Payments.WeixinPay\",//支付方式 当前默认微信 硬编码\n\t\t\t\t\"OrderItems\": this.$data.order,\n\t\t\t\t\"OrderNote\":this.$data.OrderNote,//订单描述\t\t\t\t  \n\t\t\t\t\"ShopId\":this.$data.StoreId,\n\t\t\t\t\"CustomerTakeType\":this.$data.ShopTakeValue,\n\t\t\t\t\"WishDateTime\": this.$data.PickTime,\n\t\t\t\t\"formId\":formId,\n\t\t\t\t// \"AppId\":\"5099f520489646d28ce9df352237c059\" ,// 门店点Appid，不是小程序ID\n\t\t\t}\n\t\t\t// 取单联系方式判断\n\t\t\tif(this.$data.ShopTakeValue == this.db.SHOP_TAKE_WM){ //外卖\n\t\t\t\tif(this.$data.currentAddress.id)\n\t\t\t\t\tdata[\"AddressId\"] = this.$data.currentAddress.id\n\t\t\t\telse{\n\t\t\t\t\tuni.showModal({title:\"请添加收货地址\"})\n\t\t\t\t\treturn \n\t\t\t\t}\n\t\t\t} \n\t\t\tif(this.$data.ShopTakeValue == this.db.SHOP_TAKE_ZQ){// 到店自取 | 堂食 获取电话\n\t\t\t\tvar OrderPrePhone = this.$data.OrderPrePhone\n\t\t\t\tif(OrderPrePhone.length == 11){ \n\t\t\t\t\tuni.setStorageSync(this.db.KEY_ORDER_PRE_PHONE ,  OrderPrePhone)\n\t\t\t\t\tdata[\"ReceiverPhone\"] = OrderPrePhone\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({title:\"取单电话格式不对\"})\n\t\t\t\t\treturn \n\t\t\t\t}\t\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tthis.setData({ noPowerPay :true})\n\t\t\t// 下单数据\n\t\t\tvar jsondata = JSON.stringify(data)\t\t\t\t\n\t\t\tconsole.log(data)\n\t\t\tvar res = await this.db.orderGen({\n\t\t\t\tjsondata:jsondata,\t\t\t\t\t\n\t\t\t\tsharewxopenid:app.globalData.shareUserSN || \"\", // 分享者id\n\t\t\t})\n\t\t\tif(res.code == 0){\n\t\t\t\tvar data = res.data\n\t\t\t\tvar orderId = data.id\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '/pages/wx/wxpay?orderId=' + orderId,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setData({ noPowerPay :false})\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t\n\t\t/**************路由 || 输入*************/\n\t\t// 去到我的位置\n\t\ttoAddress(){ uni.navigateTo({ url:\"/pages/my/address\" }) },\t\t\t\n\t\t// // 获取本地预留的电话\n\t\tinputOrderPrePhone(e){ this.setData({ OrderPrePhone:e.detail.value, }) },\n\t\t// 输入备注内容\n\t\tinputOrderNote(e){ this.setData({OrderNote:e.detail.value}) },\t\n\t\t// 返回\n\t\tback(){\tuni.navigateBack({}) },\t\t\t\t\n\t\t// 单时间选择\n\t\tTimeChange(e) { this.setData({PickTime: e.detail.value}) },\n\t}\n}\n"],"sourceRoot":""}